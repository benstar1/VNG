<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>       
        <h:outputScript library="js" name="bootstrap.min.js" />
        <h:outputScript library="js" name="jqBootstrapValidation.js" />        
        
        <!--meta http-equiv="refresh" content="2600;url=http://10.3.3.183:8080/CFisc/login.xhtml"/-->
        <title>BIENVENUE SUR LA PLATEFORME DE GESTION DU REPERTOIRE UNIQUE</title>
    </h:head>

    <h:body style="padding-top: 0px">
        <h:outputStylesheet name="./css/default.css"/>
        <h:outputStylesheet name="./css/cssLayout.css"/>
        <h:outputStylesheet library="bootstrap3" name="css/bootstrap.css"/>
      
      <link href="resources/bootstrap3/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
      <link href="resources/bootstrap3/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
      <link href="resources/bootstrap3/css/bootstrap-theme.css" rel="stylesheet" type="text/css"/>
        <h:outputStylesheet name="./css/modern-business.css" />       
         
        
        <div id="top" style="margin-bottom: 0px ">
            <ui:insert name="top"></ui:insert>
            <div class="row" style="margin-bottom: 0px !important; padding: 0px !important">
                <div id="banniere" style="width: 100%; margin: 0px">
                    <div align="left" id="logo1" style="display: inline-block; width: 25%; margin: 0px"><h:graphicImage library="images" name="logo_mef.jpg" style="width: 364px; height: 100px;" alt="Logo MEF"/></div>

                    <div   class="text-center" id="texte" style=" float:  right;  text-align: right;  width: 70%; height: 100px; display: inline-block; margin: 0px; "><br/> <p style=" text-align: inherit ; color:black;  font-size: x-large;  text-decoration-style:  solid;  font-style:  italic; ">PLATEFORME DE GESTION DU REPERTOIRE UNIQUE</p></div>

                </div>
                <div id="identification" style=" height:0;   clear:  both; background-color: forestgreen ; width: 100%; margin-bottom: 0px">
 
                     <c:if test="#{loginMBean.contribuable}">


                                    <!--td> <strong> <h:outputLabel  value="IFU :"/></strong></td>
                                    <td>  <strong> <h:outputText style=" color:  yellow " value="#{loginMBean.utilisateurconnecte.utilContImmatr.contImmatr}"/></strong>
                                    </td>

                                    <td><strong>  <h:outputLabel value="Nom/Raison Sociale :"/></strong></td>
                                    <td>   <h:outputText value="#{loginMBean.utilisateurconnecte.utilContImmatr.contRais}"/>
                                    </td>
                                    <td>  <strong> <h:outputLabel value="Prénoms/Autre dénomination :"/></strong>
                                    </td>
                                    <td>   <h:outputText value="#{loginMBean.utilisateurconnecte.utilContImmatr.contPren.toUpperCase()}"/>
                                        <h:outputText value="#{loginMBean.utilisateurconnecte.utilContImmatr.contNomLong.toUpperCase()}"/>

                                    </td -->



                                </c:if>

                                <c:if test="#{loginMBean.inspectmaj}">
                                    <nav class="navbar navbar-default">
                                    <div class="container-fluid">
                                      <!-- Brand and toggle get grouped for better mobile display -->
                                      <ul class="nav navbar-nav">
                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Nom et Prénoms :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.utilNom.toUpperCase()} #{loginMBean.utilisateurconnecte.utilPrenoms}</div></a></li>

                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Service :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.fonctCod.code}</div></a></li>

                                          <li><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Direction/Centre :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.fonctCod.direction.code}</div></a></li>

                                      </ul>

                                      <!-- Collect the nav links, forms, and other content for toggling -->
                                      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">


                                        <ul class="nav navbar-nav navbar-right">       
                                          <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicons glyphicons-cogwheel"></span> Paramètres <span class="caret"></span></a>
                                            <ul class="dropdown-menu">
                                                <li><h:form><p:commandLink class="myButton" action="#{loginMBean.beforePasswordChange()}" ajax="true" oncomplete="PF('passwordChgDlg').show()" update=":passwordChgDlg" >Modifier mot de passe </p:commandLink></h:form></li>                                                                                          
                                              <li role="separator" class="divider"></li>
                                              <li><h:form><h:commandLink class="myButtonDeconnexion" action="#{loginMBean.logout()}" rendered="#{loginMBean.connected}">se déconnecter</h:commandLink></h:form></li>
                                            </ul>
                                          </li>
                                        </ul>
                                      </div><!-- /.navbar-collapse -->
                                    </div><!-- /.container-fluid -->
                                  </nav>
                                </c:if>

                                <c:if test="#{loginMBean.inspecteur}">
                                   <nav class="navbar navbar-default">
                                    <div class="container-fluid">
                                      <!-- Brand and toggle get grouped for better mobile display -->
                                      <ul class="nav navbar-nav">
                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Nom et Prénoms :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.utilNom.toUpperCase()} #{loginMBean.utilisateurconnecte.utilPrenoms}</div></a></li>

                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Service :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.fonctCod.code}</div></a></li>

                                          <li><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Direction/Centre :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.fonctCod.direction.code}</div></a></li>

                                      </ul>

                                      <!-- Collect the nav links, forms, and other content for toggling -->
                                      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">


                                        <ul class="nav navbar-nav navbar-right">       
                                          <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Paramètres <span class="caret"></span></a>
                                            <ul class="dropdown-menu">
                                              <li><a href="#">Changer mot de passe</a></li>
                                              <li><a href="#">Créer un utilisateur</a></li>
                                              <li><a href="#">Créer un administrateur </a></li>
                                              <li role="separator" class="divider"></li>
                                              <li><a href="#">Se déconnecter</a></li>
                                            </ul>
                                          </li>
                                        </ul>
                                      </div><!-- /.navbar-collapse -->
                                    </div><!-- /.container-fluid -->
                                  </nav>
                                </c:if>

                                <c:if test="#{loginMBean.admin}">
                                    <nav class="navbar navbar-default">
                                    <div class="container-fluid">
                                      <!-- Brand and toggle get grouped for better mobile display -->
                                      <ul class="nav navbar-nav">
                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Nom et Prénoms :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.utilNom.toUpperCase()} #{loginMBean.utilisateurconnecte.utilPrenoms}</div></a></li>
                                      </ul>

                                      <!-- Collect the nav links, forms, and other content for toggling -->
                                      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">


                                        <ul class="nav navbar-nav navbar-right">       
                                          <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Paramètres <span class="caret"></span></a>
                                            <ul class="dropdown-menu">
                                              <li><a href="#">Changer mot de passe</a></li>
                                              <li><a href="#">Se déconnecter</a></li>
                                              <li><a href="#">Something else </a></li>
                                              <li role="separator" class="divider"></li>
                                              <li><a href="#">Se déconnecter</a></li>
                                            </ul>
                                          </li>
                                        </ul>
                                      </div><!-- /.navbar-collapse -->
                                    </div><!-- /.container-fluid -->
                                  </nav>
                                </c:if>

                                <c:if test="#{loginMBean.activecc}">
                                    <nav class="navbar navbar-default">
                                    <div class="container-fluid">
                                      <!-- Brand and toggle get grouped for better mobile display -->
                                      <ul class="nav navbar-nav">
                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Nom et Prénoms :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.utilNom.toUpperCase()} #{loginMBean.utilisateurconnecte.utilPrenoms}</div></a></li>

                                          <li ><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Service :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.fonctCod.code}</div></a></li>

                                          <li><a href="#"><div id="nom" style="float: left; padding-right: 10px; font-weight: bold; color: #045491" >Direction/Centre :</div> <span class="sr-only">(current)</span></a></li>
                                          <li><a href="#"><div class="mesDivBanieres">#{loginMBean.utilisateurconnecte.fonctCod.direction.code}</div></a></li>

                                      </ul>

                                      <!-- Collect the nav links, forms, and other content for toggling -->
                                      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">


                                        <ul class="nav navbar-nav navbar-right">       
                                          <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Paramètres <span class="caret"></span></a>
                                            <ul class="dropdown-menu">
                                              <li><a href="#">Changer mot de passe</a></li>
                                              <li><a href="#">Se déconnecter</a></li>
                                              <li><a href="#">Something else </a></li>
                                              <li role="separator" class="divider"></li>
                                              <li><a href="#">Se déconnecter</a></li>
                                            </ul>
                                          </li>
                                        </ul>
                                      </div><!-- /.navbar-collapse -->
                                    </div><!-- /.container-fluid -->
                                  </nav>
                                </c:if>
                           
                </div>
            </div>

        </div>

        <div>
            <div id="left" style="width: 15% !important">
                <ui:include src="./res/menu.xhtml"/>
            </div>

            <div id="content" class="left_content">

                <ui:insert name="body">
                    <p/>
                </ui:insert>

            </div>

        </div>
        <div id="bottom" style=" height: 70px; " >
            <!--            <ui:insert name="bottom">Bottom</ui:insert>-->

            <ui:include src="./menus/bottommenu.xhtml"/>
        </div>

        <p:dialog widgetVar="passwordChgDlg" id="passwordChgDlg" >
            <h:form id="passwordChgForm">
                <h:messages errorStyle="color: red; font-weight: bold !important"/>  
                <h:panelGrid columns="2">
                    <h:outputLabel value="Mot de passe actuel"/>
                    <h:inputSecret value="#{loginMBean.currentPassWord}" required="true"/>
                    <h:outputLabel value="Nouveau mot de passe"/>
                    <h:inputSecret value="#{loginMBean.newPassword}" required="true"/>
                    <h:outputLabel value="Confirmantion"/>
                    <h:inputSecret value="#{loginMBean.confirmPassword}" required="true"/>
                    <h:outputLabel value=""/>
                    <p:commandButton value="Changer" actionListener="#{loginMBean.changePassword()}" ajax="true" update="@form"/>
                </h:panelGrid>
                
            </h:form>
        </p:dialog>
    </h:body>

</html>
